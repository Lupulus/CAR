package Main;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import Request.FtpRequest;

public class Serveur implements Runnable{

	/**
	 * @param args
	 * @throws IOException 
	 */
	private static Socket s;
	private static ServerSocket serv;
	
	
	public static void main(String[] args) throws IOException {
		// TODO Auto-generated method stub
		Information inf = new Information();
		
		try{
			serv = new ServerSocket(inf.getPortServor());
			System.out.println("Connection successful");
		}catch(Exception e){
			System.out.println(e.getMessage());
		}
		
		while(true){
			s = serv.accept();
			System.out.println("Socket connect√©e");
			Thread t = new Thread(){
				public void run(){
					FtpRequest ftp;
					try {
						ftp = new FtpRequest(s);
						ftp.processRequest();
					} catch (IOException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}				
				}};
			t.start();
		}
	}

	@Override
	public void run() {
	}

}
