package Command;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import Request.FtpRequest;

public class CommandStor extends Command{

	public CommandStor(FtpRequest ftp, File repertoire, String filename) {
		super(ftp);
		process(repertoire, filename);
	}
	
	public void process(File repertoire, String filename){
		File file = new File(repertoire.getPath() + "/" + filename);

		try(FileOutputStream os = new FileOutputStream(file)) {
			this.receiveFromClient(os);
		} catch(IOException e) {
			ftp.send(426, "Connection closed, transfert aborted");
			ftp.closeDataSocket();
			return;
		}
	    super.send(226, "STOR r√©ussi");
	}

}
