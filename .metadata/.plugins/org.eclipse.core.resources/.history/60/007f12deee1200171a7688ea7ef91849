package actor; 

import akka.actor.ActorRef;
import akka.actor.ActorSelection;
import akka.actor.ActorSystem;
import akka.actor.Props;

public class Noeud {

  ActorSelection child1 = null, child2 = null;
  ActorRef sender = null, greeter = null;
  
  
  boolean firstSendBack = false;
  boolean firstGraphTransmit = false;
  ActorSystem system;
  
  public Noeud(int noeudNumber, int child1Number, int child2Number, ActorSystem noeudSystem){
	  sender = system.actorOf( Props.create(Sender.class), "sender"+noeudNumber );
	  greeter = system.actorOf( Props.create(Greeter.class), "sender1" );
  }
  
  public void createChild(int child1Number, int child2Number){
	  if(child1Number%2 == 0)
		  child1 = system.actorSelection("akka.tcp://MySystem2@127.0.0.1:2552/user/greeter" + child1Number);
	  else
		  child1 = system.actorSelection("akka.tcp://MySystem1@127.0.0.1:2552/user/greeter" + child1Number);
	  

	  if(child2Number%2 == 0)
		  child2 = system.actorSelection("akka.tcp://MySystem2@127.0.0.1:2552/user/greeter" + child2Number);
	  else
		  child2 = system.actorSelection("akka.tcp://MySystem1@127.0.0.1:2552/user/greeter" + child2Number);
  }
  
  public void send(){
	  
  }
  ActorRef greeter1 = system.actorOf( Props.create(Noeud.class), "greeter1" );
//  @Override
//  public void onReceive(Object msg) {	  
//	 
//	
//	if(msg == Msg.CHILD1){
//		children[1] = getSender();
//	}else if (msg == Msg.CHILD2){
//		children[2] = getSender();
//	}else if(msg == Msg.PARENT){
//		parent = getSender();
//	}else if (msg == Msg.TRANSMIT) {
//		if(getSender() == parent){
//			if(children[1] != null){
//				children[1].tell(Msg.TRANSMIT, getSelf());
//			}
//			if(children[2] != null){
//				children[2].tell(Msg.TRANSMIT, getSelf());
//			}
//		}else{
//			getSender().tell(Msg.GRAPH, getSelf());
//		}
//      //getSender().tell("Et vous, ca va? ", getSelf());
//    }else if(msg == Msg.SENDBACK){
//    	if(parent != null){
//			if(firstSendBack || children[1] == null || children[2] == null){
//				firstSendBack = false;
//				parent.tell(Msg.SENDBACK, getSelf());
//			}else{
//				firstSendBack = true;
//			}
//    	}else{
//    		System.out.println("Le message a �t� transmis � tout le monde");
//    	}
//    }else if(msg == Msg.GRAPH){
//    	System.out.println("Message graphe entre l'acteur" + getSelf() + "et l'acteur " + getSender());
//    }else unhandled(msg);
//  }

}
